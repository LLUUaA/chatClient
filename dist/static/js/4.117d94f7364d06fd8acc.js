webpackJsonp([4],{"2QH8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"20px"}},[a("el-tabs",{staticClass:"tabs-wrap",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"添加好友"}},[a("el-row",{staticClass:"flex"},[a("el-input",{staticClass:"search-input",attrs:{icon:"search",placeholder:"昵称搜索或用户号搜索"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getAccountList(e):null}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getAccountList}},[t._v("搜索")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.accountList,height:"450","expand-row-keys":t.currentKey,"row-key":"id"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"昵称"}},[a("span",[t._v(t._s(e.row.nickName))])]),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("span",[t._v(t._s(t._f("sex")(e.row.sex)))])]),t._v(" "),a("el-form-item",{attrs:{label:"用户ID"}},[a("span",[t._v(t._s(e.row.uid))])]),t._v(" "),a("el-form-item",{attrs:{label:"签名"}},[a("span",[t._v(t._s(e.row.signature||"-"))])]),t._v(" "),a("el-form-item",{attrs:{label:"生日"}},[a("span",[t._v(t._s(t._f("birthday")(e.row.birthday)))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用户id",prop:"uid"}}),t._v(" "),a("el-table-column",{attrs:{label:"昵称",prop:"nickName"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.addFriend(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"添加聊天室"}},[a("el-row",{staticClass:"flex"},[a("el-input",{staticClass:"search-input",attrs:{icon:"search",placeholder:"搜索房间号或房间名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getRoomList(e):null}},model:{value:t.keyword2,callback:function(e){t.keyword2=e},expression:"keyword2"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getRoomList}},[t._v("搜索")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.roomList,height:"450","expand-row-keys":t.currentKey,"row-key":"id"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"房间名"}},[a("span",[t._v(t._s(e.row.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("span",[t._v(t._s(t._f("sex")(e.row.type)))])]),t._v(" "),a("el-form-item",{attrs:{label:"总人数"}},[a("span",[t._v(t._s(e.row.total))])]),t._v(" "),a("el-form-item",{attrs:{label:"成员"}},[a("span",[t._v(t._s(e.row.member))])]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t._f("time")(e.row.createTime)))])]),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("span",[t._v(t._s(e.row.postscript))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"房间号码",prop:"roomNo"}}),t._v(" "),a("el-table-column",{attrs:{label:"房间名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.addRoom(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")({data:function(){return{currentKey:null,keyword:null,keyword2:null,accountList:null,roomList:null,loading:null}},mounted:function(){this.getAccountList(),this.getRoomList()},methods:{getAccountList:function(){var t=this;this.loading=!0,this.axios({url:"friend/search",params:{keyword:this.keyword}}).then(function(e){t.accountList=e,t.loading=!1}).catch(function(e){t.loading=!1})},getRoomList:function(){var t=this;this.loading=!0,this.axios({url:"room/search",params:{keyword:this.keyword2||""}}).then(function(e){t.roomList=e,t.loading=!1}).catch(function(e){t.loading=!1})},rowKeyFun:function(t){return t.id},handleEdit:function(t,e){this.currentKey=[e.id]},addRoom:function(t,e){var a=this;this.axios({url:"room/addMember",method:"post",data:{id:e.id}}).then(function(t){a.$message({showClose:!0,message:"添加成功",type:"success"})},function(t){a.$message({showClose:!0,message:1062===t.data.code?"你已经添加过此房间":t.data.content||"添加失败，请重试",type:"warning"})})},addFriend:function(t,e){var a=this;this.axios({url:"friend/add",method:"post",data:{uid:e.uid}}).then(function(t){a.$message({showClose:!0,message:"添加成功",type:"success"})}).catch(function(t){a.$message({showClose:!0,message:1062===t.data.code?"你已经添加过此好友":t.data.content||"添加失败，请重试",type:"warning"})})}}},n,!1,function(t){a("TDoM")},"data-v-4165b46c",null);e.default=o.exports},TDoM:function(t,e){}});