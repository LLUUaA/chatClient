webpackJsonp([3],{"22j4":function(e,t,a){"use strict";var s=a("2uFj"),r={name:"avatarUploadComponent",data:function(){return{uploadUrl:s.uploadUrl+"upload",uploadHeaders:{Authorization:"SessionKey "+this.$globalData.session}}},props:{avatar:null,defalutIcon:null},methods:{handleSuccess:function(e){e.fileUrl&&this.$emit("success",e.fileUrl)}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"file-list avatar"},[t("img",{directives:[{name:"imgLoad",rawName:"v-imgLoad",value:{src:this.avatar,errorSrc:this.defalutIcon},expression:"{src: avatar, errorSrc: defalutIcon}"}],attrs:{width:"100%",alt:"avatar"}})]),this._v(" "),t("el-upload",{staticClass:"uload-wrap",attrs:{action:this.uploadUrl,limit:1,accept:"image/*",headers:this.uploadHeaders,"on-success":this.handleSuccess,"list-type":"picture-card",enctype:"multipart/form-data"}},[t("i",{staticClass:"el-icon-plus"})])],1)},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(e){a("enbN")},"data-v-e8143a44",null);t.a=n.exports},XIUn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),o=a("exGp"),n=a.n(o),l=a("IxXs"),i=a.n(l),c=a("22j4"),u=a("8cdv"),m=[],d={name:"setting",components:{avatarComponent:c.a},data:function(){return{formModal:{nickName:"",signature:"",avatar:"",pass:"",checkPass:""},rules:{pass:[{trigger:"blur"}],nickName:[{trigger:"blur",required:!0,min:1,max:20,message:"请输入昵称"}],checkPass:[{trigger:"blur"}],age:[{trigger:"blur"}]},defalutIcon:i.a,state1:!1,state2:!1}},destroyed:function(){this.destroyedListener(m)},mounted:function(){this.setUserInfo(this.$globalData.userInfo);var e=this.myListener.on(u.EVENT_GET_OWNER_INFO,this.setUserInfo);m.push(e)},methods:{submit:function(e){var t,a=this;this.$refs[e].validate((t=n()(r.a.mark(function t(s){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,a.axios({url:"/account/owner",method:"put",data:a[e]});case 4:a.$message({message:"编辑成功",type:"success"}),a.myListener.emit(u.EVENT_UPDATE_OWNER_INFO,null);case 6:case"end":return t.stop()}},t,a)})),function(e){return t.apply(this,arguments)}))},handleSuccess:function(e){this.formModal.avatar=e},setUserInfo:function(e){try{this.formModal.nickName=e.nickName,this.formModal.signature=e.signature,this.formModal.avatar=e.avatar}catch(e){}},resetForm:function(e){this.$refs[e].resetFields()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("el-form",{ref:"formModal",staticClass:"demo-ruleForm",attrs:{model:e.formModal,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.state1,expression:"!state1"}],staticStyle:{"text-align":"center"}},[a("avatarComponent",{attrs:{avatar:e.formModal.avatar,defalutIcon:e.defalutIcon},on:{success:this.handleSuccess}})],1),e._v(" "),a("el-form-item",[a("el-switch",{attrs:{checked:e.state1,"inactive-text":"使用网络地址","active-color":"#13ce66"},model:{value:e.state1,callback:function(t){e.state1=t},expression:"state1"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.state1,expression:"state1"}],attrs:{label:"图片地址",prop:"avatar"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.formModal.avatar,callback:function(t){e.$set(e.formModal,"avatar",t)},expression:"formModal.avatar"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.formModal.nickName,callback:function(t){e.$set(e.formModal,"nickName",t)},expression:"formModal.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"个人签名",prop:"signature"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.formModal.signature,callback:function(t){e.$set(e.formModal,"signature",t)},expression:"formModal.signature"}})],1),e._v(" "),a("el-form-item",[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-text":"修改密码"},model:{value:e.state2,callback:function(t){e.state2=t},expression:"state2"}})],1),e._v(" "),[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.state2,expression:"state2"}],attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.formModal.pass,callback:function(t){e.$set(e.formModal,"pass",t)},expression:"formModal.pass"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.state2,expression:"state2"}],attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.formModal.checkPass,callback:function(t){e.$set(e.formModal,"checkPass",t)},expression:"formModal.checkPass"}})],1)],e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("formModal")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("formModal")}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var p=a("VU/8")(d,f,!1,function(e){a("doAS")},"data-v-61bea223",null);t.default=p.exports},doAS:function(e,t){},enbN:function(e,t){}});