webpackJsonp([8],{0:function(e,n){},"2uFj":function(e,n,t){var o={requestUrl:"",uploadUrl:"",socketUrl:"",isDev:null};o.isDev=!1,o.requestUrl="http://api2.bubaocloud.xin/",o.uploadUrl="http://upload.bubaocloud.xin/",o.socketUrl="ws://sockect.bubaocloud.xin",e.exports=o},"89gF":function(e,n){},FnZM:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={};t.d(o,"dateTime",function(){return Y}),t.d(o,"time",function(){return j}),t.d(o,"birthday",function(){return A}),t.d(o,"decodeContent",function(){return I}),t.d(o,"sex",function(){return N});var r={};t.d(r,"imgLoad",function(){return R});var a=t("fZjL"),s=t.n(a),i=t("BO1k"),c=t.n(i),u=t("7+uW"),l={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var f=t("VU/8")({name:"App"},l,!1,function(e){t("isk7")},null,null).exports,m=t("/ocq"),p=t("p2oO"),d={name:"login",data:function(){return{form:{},showLoading:!1}},mounted:function(){},methods:{login:function(){var e=this;this.showLoading=!0,this.axios({url:"account/login",method:"post",data:this.form}).then(function(n){e.$message({message:"登录成功",type:"success"}),Object(p.c)(n.sessionKey,n.expireTime),e.$globalData.userInfo=n,e.$globalData.session=n.sessionKey,e.$router.push("/index/single")},function(n){e.$message({message:"账号或密码不正确",type:"warning"})}).then(function(n){e.showLoading=!1})}}},g={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-container",[t("div",{staticClass:"main-wrap"},[t("p",[e._v("登 录")]),e._v(" "),t("el-input",{attrs:{"prefix-icon":"el-icon-mobile-phone",placeholder:"账号"},model:{value:e.form.account,callback:function(n){e.$set(e.form,"account",n)},expression:"form.account"}}),e._v(" "),t("el-input",{attrs:{"prefix-icon":"el-icon-view",placeholder:"密码",type:"password"},nativeOn:{keyup:function(n){return"button"in n||!e._k(n.keyCode,"enter",13,n.key,"Enter")?e.login(n):null}},model:{value:e.form.password,callback:function(n){e.$set(e.form,"password",n)},expression:"form.password"}}),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.showLoading},on:{click:e.login}},[e._v("登录")]),e._v(" "),t("p",[e._v("还没有账号？\n      "),t("router-link",{attrs:{to:"/register"}},[e._v("去注册")])],1)],1)])},staticRenderFns:[]};var h=t("VU/8")(d,g,!1,function(e){t("89gF")},"data-v-f9e9524e",null).exports,v={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-container",[t("div",{staticClass:"main-wrap"},[t("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.form}},[t("p",[e._v("账号注册")]),e._v(" "),t("el-form-item",{attrs:{prop:"nickName"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-info",placeholder:"昵称"},model:{value:e.form.nickName,callback:function(n){e.$set(e.form,"nickName",n)},expression:"form.nickName"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"account"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-mobile-phone",placeholder:"手机号或邮箱"},model:{value:e.form.account,callback:function(n){e.$set(e.form,"account",n)},expression:"form.account"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-view",placeholder:"密码",type:"password"},model:{value:e.form.password,callback:function(n){e.$set(e.form,"password",n)},expression:"form.password"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"comfirmPassword"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-view",placeholder:"确认密码",type:"password"},model:{value:e.form.comfirmPassword,callback:function(n){e.$set(e.form,"comfirmPassword",n)},expression:"form.comfirmPassword"}})],1),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.showLoading},on:{click:e.register}},[e._v("注册")])],1),e._v(" "),t("p",[t("router-link",{attrs:{to:"/login"}},[e._v("返回登录")])],1)],1)])},staticRenderFns:[]};var b=t("VU/8")({name:"register",data:function(){return{form:{},showLoading:!1,rules:{nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],account:[{required:!0,message:"请输入手机号或邮箱",trigger:"blur"},{max:30,message:"长度不超过 30 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度最少6个个字符",trigger:"blur"}],comfirmPassword:[{required:!0,message:"再次输入密码",trigger:"blur"}]}}},mounted:function(){},methods:{register:function(){var e=this;this.$refs.ruleForm.validate(function(n){n&&(e.form.password===e.form.comfirmPassword?e.axios({url:"account/register",method:"post",data:e.form}).then(function(n){e.$message({message:"注册成功",type:"success"}),e.$router.push("/login")}).catch(function(n){e.$message({message:n.data.content||"注册失败",type:"fail"})}):e.$message({message:"两次密码输入不一致",type:"warning"}))})}}},v,!1,function(e){t("FnZM")},"data-v-65fb309e",null).exports;u.default.use(m.a);var w=new m.a({mode:"history",routes:[{path:"",redirect:"/login"},{path:"/index",name:"index",component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,"mlqX"))},beforeEnter:function(e,n,t){t(!!Object(p.b)()||"/login")},children:[{path:"single",name:"single",component:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,"X8Cn"))}},{path:"room",name:"room",component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"Yc3v"))}},{path:"search",name:"search",component:function(){return t.e(5).then(t.bind(null,"2QH8"))}},{path:"setting",name:"setting",component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"XIUn"))}}]},{path:"/login",name:"Login",component:h},{path:"/register",name:"Register",component:b},{path:"*",name:"notFound",component:function(){return t.e(6).then(t.bind(null,"wkqA"))}}]}),y=t("zL8q"),k=t.n(y),x=(t("tvR6"),t("Dd8w")),_=t.n(x),$=t("//Fk"),F=t.n($),U=t("2uFj"),D=t.n(U),q=t("mtWM"),L=t("d7EF"),E=t.n(L),M=t("DmT9"),O=t.n(M),P=t("oqQY"),S=t.n(P);function Y(e){return S()(e).format("YYYY-MM-DD hh:mm")}function j(e){return S()(e).format("hh:mm")}function A(e){return e?S()(e).format("YYYY-MM-DD"):"-"}function I(e){return decodeURIComponent(e||"-")}function N(e){switch(e){case 1:e="男";break;case 2:e="女";break;default:e="未知"}return e}function R(e,n){var t=n.value,o=t.src,r=t.errorSrc;e.src=o,e.onerror=function(n){e.src=r}}var C=t("ifoU"),W=t.n(C),z=new W.a,T={on:function(e,n){z.has(e)||z.set(e,new W.a);var t=z.get(e).size;return z.get(e).set(t,n),{cancel:function(){z.get(e).delete(t)}}},emit:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var r=z.get(e);r&&r.forEach(function(e){e&&e.apply(void 0,t)})}},H=_()({},{userInfo:null,session:null});t("uM1m");S.a.locale("zh-cn"),u.default.config.productionTip=!1,u.default.use(k.a),u.default.prototype.$globalData=H,u.default.prototype.WS=null,u.default.prototype.axios=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new F.a(function(t,o){q.defaults.headers.common.Authorization="SessionKey "+Object(p.b)(),q(_()({method:"get",baseURL:U.requestUrl,timeout:6e3,headers:{"access-control-allow":"*","Access-Control-Allow-Origin":"*"}},n)).then(function(e){t(e.data)}).catch(function(n){n.response&&401===n.response.status&&e.$router.push("/login"),o(n.response)})})},u.default.prototype.dayjs=S.a,u.default.prototype.myListener=T,u.default.prototype.destroyedListener=function(e){try{var n=!0,t=!1,o=void 0;try{for(var r,a=c()(e);!(n=(r=a.next()).done);n=!0){var s=r.value.cancel;s&&s()}}catch(e){t=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(t)throw o}}}catch(e){}},D.a.isDev||(console.log=function(){},console.warn=function(){},console.error=function(){}),s()(o).forEach(function(e){return u.default.filter(e,o[e])}),s()(r).forEach(function(e){return u.default.directive(e,r[e])}),w.beforeEach(function(e,n,t){return e.path.indexOf("/index")<0?t():(H.session=Object(p.b)(),u.default.prototype.WS&&u.default.prototype.WS.connected?t():(o=H.session,r=function(e){u.default.prototype.WS=e,e?t():w.push("/login")},(a=O()(U.socketUrl,{path:"/socket",transports:["websocket"],query:{token:o}})).on("connect",function(){r&&r(a)}),void a.on("error",function(e){r&&r(null);try{var n=e.split(","),t=E()(n,2),o=t[0];t[1],401===Number(o)&&(a.close(),console.warn("socket disconnected"))}catch(e){}})));var o,r,a}),new u.default({el:"#app",router:w,components:{App:f},template:"<App/>"})},isk7:function(e,n){},p2oO:function(e,n,t){"use strict";n.b=function(){if(sessionStorage){var e=sessionStorage.getItem("session");if(e){var n=e.split("-"),t=r()(n,2),o=t[0],s=t[1];return a()>parseInt(s)?null:o}}return null},n.c=function(e,n){sessionStorage&&sessionStorage.setItem("session",e+"-"+a(n))},n.a=function(){sessionStorage.removeItem("session")};var o=t("d7EF"),r=t.n(o);function a(e){return e?Math.round(new Date(e)/1e3):Math.round(new Date/1e3)}},tvR6:function(e,n){}},["NHnr"]);